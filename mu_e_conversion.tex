\documentclass{article}
\usepackage{feynmp}
%\usepackage{feynmf}
\thispagestyle{empty}

\usepackage{ifpdf}
\ifpdf
  \DeclareGraphicsRule{*}{mps}{*}{}
\fi

\makeatletter
\def\endfmffile{%
  \fmfcmd{\p@rcent\space the end.^^J%
          end.^^J%
          endinput;}%
  \if@fmfio
    \immediate\closeout\@outfmf
  \fi
  \IfFileExists{\thefmffile.mp}{\immediate\write18{mpost \thefmffile}}{}
  \let\thefmffile\relax
}
\makeatother

\begin{document}

\begin{fmffile}{meg2}
\begin{fmfgraph*}(84,48) 
\fmfpen{1}
\fmfstraight{}
\fmfleftn{i}{2}
\fmfrightn{o}{2}
\fmf{fermion, label=$q$, label.side=right}{i1,v2}
\fmf{fermion, label=$\mu$, label.side=right}{i2,v1} 
\fmf{fermion, label=$q$, label.side=right}{v3,o1}
\fmf{fermion, label=$e$, label.side=right}{v4,o2} 
\fmfpolyn{smooth,pull=0.9,phantom,  full, foreground=(0.5,,0.5,,0.5)}{v}{4}
%\fmfv{decor.shape=triagram,decor.size=.15w, d.f=50}{v1}
%\fmflabel{$\mu$}{i1}
\end{fmfgraph*} 
\end{fmffile}

\end{document}
